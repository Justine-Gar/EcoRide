<!-- Modal ajouter une voiture -->
<div class="modal fade" id="addVehicleModal" tabindex="-1" aria-labelledby="addVehicleModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="addVehicleModalLabel">Ajouter un véhicule</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				{{ form_start(carForm) }}
				<div class="mb-3">
					{{ form_row(carForm.marque) }}
				</div>
				<div class="mb-3">
					{{ form_row(carForm.modele) }}
				</div>
				<div class="mb-3">
					{{ form_row(carForm.color) }}
				</div>
				<div class="mb-3">
					{{ form_row(carForm.energie) }}
				</div>
				<div class="mb-3">
					{{ form_row(carForm.nbr_places) }}
				</div>
				<div class="mb-3">
					{{ form_row(carForm.license_plate) }}
				</div>
				<div class="mb-3">
					{{ form_row(carForm.first_registration) }}
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
					<button type="submit" class="btn btn-primary">Ajouter</button>
				</div>
				{{ form_end(carForm) }}
			</div>
		</div>
	</div>
</div>

<!-- Modal de modification profil-->
<div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="editProfileModalLabel">Modifier mon profil</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">

				{{ form_start(form, {'attr': {'enctype': 'multipart/form-data', 'id': 'profile-edit-form', 'class': 'needs-validation'}}) }}

				{% if user.profilPicture %}
					<div class="mb-3 text-center">
						<img src="{{ asset('uploads/profile_pictures/' ~ user.profilPicture) }}" class="rounded-circle mb-2" style="width: 100px; height: 100px; object-fit: cover;" alt="Photo de profil actuelle">
					</div>
				{% endif %}

				{# Affichage des messages d'erreur/succès #}
				{% for message in app.flashes('success') %}
					<div class="alert alert-success">
						{{ message }}
					</div>
				{% endfor %}
				{% for message in app.flashes('error') %}
					<div class="alert alert-danger">
						{{ message }}
					</div>
				{% endfor %}

				<div class="mb-3">
					{{ form_row(form.firstname) }}
				</div>
				<div class="mb-3">
					{{ form_row(form.name) }}
				</div>
				<div class="mb-3">
					{{ form_row(form.email) }}
				</div>
				<div class="mb-3">
					{{ form_row(form.phone_number) }}
				</div>
				<div class="mb-3">
					{{ form_row(form.profilePicture) }}
					<small class="text-muted">
						<i class="fas fa-info-circle"></i>
						Taille maximale : 1 Mo - Formats acceptés : JPG, PNG
					</small>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
					<button type="submit" id="profile-submit" class="btn btn-primary">Enregistrer</button>
				</div>
				{{ form_end(form) }}
			</div>
		</div>
	</div>
</div>

<!-- Modal pour ajouter une préférence personnalisée -->
<div class="modal fade" id="addPreferenceModal" tabindex="-1" aria-labelledby="addPreferenceModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addPreferenceModalLabel">Ajouter une préférence</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form method="post" action="{{ path('app_profile_add_preference') }}">
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="preference_name" class="form-label">Nom de la préférence</label>
                        <input type="text" class="form-control" id="preference_name" name="preference_name" 
                               placeholder="Ex: Musique pendant le trajet" required>
                    </div>
                    <div class="mb-3">
                        <label for="preference_value" class="form-label">Valeur</label>
                        <input type="text" class="form-control" id="preference_value" name="preference_value" 
                               placeholder="Ex: Rock, Jazz, Pop" required>
                        <div class="form-text">Précisez votre préférence (ex: oui, non, détails spécifiques)</div>
                    </div>
                    <input type="hidden" name="_csrf_token" value="{{ csrf_token('add_preference') }}">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-green">Ajouter</button>
                </div>
            </form>
        </div>
    </div>
</div>